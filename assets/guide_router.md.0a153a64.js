import{_ as s,c as n,o as a,a as l}from"./app.30b54b26.js";const A=JSON.parse('{"title":"\u8DEF\u7531","description":"","frontmatter":{},"headers":[{"level":2,"title":"SysRouterMenu.VAdmireRoute","slug":"sysroutermenu-vadmireroute"},{"level":2,"title":"ExtendRouteMeta.ts","slug":"extendroutemeta-ts"},{"level":2,"title":"TransformVAdmireRoute.ts","slug":"transformvadmireroute-ts"},{"level":2,"title":"GlobModules.ts","slug":"globmodules-ts"}],"relativePath":"guide/router.md"}'),o={name:"guide/router.md"},p=l(`<h1 id="\u8DEF\u7531" tabindex="-1">\u8DEF\u7531 <a class="header-anchor" href="#\u8DEF\u7531" aria-hidden="true">#</a></h1><p>\u7CFB\u7EDF\u4E00\u5171\u5206\u4E3A\u4E24\u79CD\u8DEF\u7531\uFF0C\u5E38\u91CF\u8DEF\u7531\u548C\u5F02\u6B65\u8DEF\u7531\u3002</p><div class="language-typescript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// STATIC_PERMISSION \u524D\u7AEF\uFF08\u9759\u6001\u6743\u9650\uFF09\u3001DYNAMIC_PERMISSION \u540E\u53F0\uFF08\u52A8\u6001\u6743\u9650\uFF09</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SysHandlePermission</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">STATIC_PERMISSION</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DYNAMIC_PERMISSION</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u7CFB\u7EDF\u5982\u679C\u4F7F\u7528 <code>STATIC_PERMISSION</code> \u65B9\u5F0F\u6765\u505A\u6743\u9650\u63A7\u5236\u5219\u9700\u8981\u5B9A\u4E49\u5F02\u6B65\u8DEF\u7531\uFF0C\u5982\u679C\u4F7F\u7528 <code>DYNAMIC_PERMISSION</code> \u65B9\u5F0F\u6765\u505A\u5219\u4E0D\u4F1A\u8BFB\u53D6\u5F02\u6B65\u8DEF\u7531\u7684\u8DEF\u7531\u8868</p></div><h2 id="sysroutermenu-vadmireroute" tabindex="-1">SysRouterMenu.VAdmireRoute <a class="header-anchor" href="#sysroutermenu-vadmireroute" aria-hidden="true">#</a></h2><p>\u7CFB\u7EDF\u8DEF\u7531\u8868\u7C7B\u578B</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u5FC5\u987B\u786E\u4FDD \u8DEF\u7531 name \u552F\u4E00</p></div><div class="language-typescript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">VAdmireRoute</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * \u9875\u9762\u8DEF\u5F84\uFF08\u4F7F\u7528\u522B\u540D\uFF0C\u5176\u4ED6\u65B9\u5F0F\u5747\u4E0D\u53EF\uFF09</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * \u6CE8\u610F\uFF1A\u5728\u4F7F\u7528VitePluginMock Mock\u5F02\u6B65\u8DEF\u7531\u6570\u636E\u7684\u65F6\u5019 @/ \u4F1A\u88AB\u5904\u7406\u4E3A /</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * \u4F8B\u5982\uFF1Acomponent: &#39;@/views/permission/RoleIndex.vue&#39; \u4F1A\u88AB\u5904\u7406\u4E3A component: &#39;@views/permission/RoleIndex.vue&#39; \u5BFC\u81F4\u81EA\u52A8\u5F15\u5165\u9875\u9762\u6A21\u5757\u5931\u6548</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * \u8FD8\u672A\u5728\u771F\u5B9E\u73AF\u5883\u63A5\u53E3\u505A\u6D4B\u8BD5\uFF0C\u76EE\u524D\u89E3\u51B3\u65B9\u6848\u5728 GlobModules \u505A\u9002\u914D\u5904\u7406</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">component</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">children</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">VAdmireRoute</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">meta</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RouteMeta</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redirect</span><span style="color:#89DDFF;">?:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u91CD\u5B9A\u5411\u8DEF\u5F84\uFF08\u8BBE\u7F6E\u8BE5\u5C5E\u6027\uFF0C\u4E0D\u9700\u8981\u8BBE\u7F6Ecomponent\uFF09</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="extendroutemeta-ts" tabindex="-1">ExtendRouteMeta.ts <a class="header-anchor" href="#extendroutemeta-ts" aria-hidden="true">#</a></h2><p>ExtendRouteMeta.ts \u4E2D\u6269\u5C55\u4E86 VueRouter \u4E2D\u8DEF\u7531 meta \u7684\u5C5E\u6027</p><div class="language-typescript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">declare</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">module</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue-router</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">interface</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">RouteMeta</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u83DC\u5355\u540D\u79F0</span></span>
<span class="line"><span style="color:#F07178;">    label</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u83DC\u5355\u56FE\u6807</span></span>
<span class="line"><span style="color:#F07178;">    icon</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u662F\u5426\u663E\u793A\u5728\u83DC\u5355\u4E2D</span></span>
<span class="line"><span style="color:#F07178;">    isShow</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u8DEF\u7531\u6743\u9650</span></span>
<span class="line"><span style="color:#F07178;">    permissions</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">&gt;;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u94FE\u63A5\uFF08\u7CFB\u7EDF\u94FE\u63A5\u3001\u5185\u94FE\u3001\u5916\u94FE\uFF09</span></span>
<span class="line"><span style="color:#F07178;">    link</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SYS_LINK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">INTERNAL_LINK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EXTERNAL_LINK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u5185\u94FE\u3001\u5916\u94FE\u7684\u94FE\u63A5\u5730\u5740</span></span>
<span class="line"><span style="color:#F07178;">    url</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u8DEF\u7531\u662F\u5426\u7F13\u5B58\uFF08\u9ED8\u8BA4\u7F13\u5B58\uFF09</span></span>
<span class="line"><span style="color:#F07178;">    cache</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="transformvadmireroute-ts" tabindex="-1">TransformVAdmireRoute.ts <a class="header-anchor" href="#transformvadmireroute-ts" aria-hidden="true">#</a></h2><p>\u6587\u4EF6 <code>@/router/utils/TransformVAdmireRoute.ts</code> \u4E2D\u7684 <code>transformVAdmireRouteToRouteRecordRaw</code> \u65B9\u6CD5\u662F\u4E00\u4E2A\u5DE5\u5177\u51FD\u6570\u3002\u7528\u4E8E\u5C06 <code>VAdmireRoute[] \u8F6C\u6362\u4E3A RouteRecordRaw[]</code></p><h2 id="globmodules-ts" tabindex="-1">GlobModules.ts <a class="header-anchor" href="#globmodules-ts" aria-hidden="true">#</a></h2><p>\u9875\u9762\u6A21\u5757\u6587\u4EF6\u7684\u5BFC\u5165 \u4F9D\u9760 Vite \u63D0\u4F9B\u7684 API <code>import.<wbr>meta.glob()</code> \u5904\u7406\u3002\u5F00\u53D1\u8005\u53EA\u9700\u5B9A\u4E49 <code>VAdmireRoute.component</code> \u63D0\u4F9B\u9875\u9762\u8DEF\u5F84\u5373\u53EF\u3002</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u53EA\u652F\u6301\u5BFC\u5165 views \u6587\u4EF6\u5939\u7684\u9875\u9762\uFF0C\u5982\u679C\u9875\u9762\u8FD8\u672A\u5B9A\u4E49\u4F1A\u9ED8\u8BA4\u8BBF\u95EE 404 \u9875\u9762</p></div><div class="language-typescript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * \u5BFC\u51FAviews\u6587\u4EF6\u5939\u4E0B\u7684\u9875\u9762\u6A21\u5757</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">path</span><span style="color:#676E95;font-style:italic;"> \u9875\u9762\u7684\u7EDD\u5BF9\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> GlobFileModule </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// \u68C0\u67E5 component \u7684\u5B57\u7B26\u4E32\u683C\u5F0F \u5177\u4F53\u95EE\u9898\u67E5\u770B SysRouterMenu.d.ts \u6587\u4EF6 component</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">TestPathFormat</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;font-style:italic;">^</span><span style="color:#C3E88D;">@views</span><span style="color:#A6ACCD;">\\/</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">+</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">TestPathFormat</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">@views</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/views</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// \u7279\u6B8A\u7EC4\u4EF6-Layout</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Layout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Layout</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// \u7279\u6B8A\u7EC4\u4EF6-Iframe</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Iframe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">BasicIframe</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ComponentAbsolutePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ModulePath</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../../</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">AllFileModules</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">ComponentAbsolutePath</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div>`,17),e=[p];function t(c,r,y,F,D,i){return a(),n("div",null,e)}var u=s(o,[["render",t]]);export{A as __pageData,u as default};
